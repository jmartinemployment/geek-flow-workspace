<div class="run-history">
  <h6 class="mb-2">Run History</h6>

  @if (isLoading()) {
    <div class="text-center py-3" role="status">
      <div class="spinner-border spinner-border-sm" aria-hidden="true"></div>
      <span class="visually-hidden">Loading runs...</span>
    </div>
  } @else {
    @if (runs().length > 0) {
      <table class="table table-sm" aria-label="Flow run history">
        <thead>
          <tr>
            <th scope="col">Status</th>
            <th scope="col">Started</th>
            <th scope="col">Completed</th>
            <th scope="col">Error</th>
          </tr>
        </thead>
        <tbody>
          @for (run of runs(); track run.id) {
            <tr>
              <td><span [class]="getStatusClass(run.status)">{{ run.status }}</span></td>
              <td>{{ run.startedAt }}</td>
              <td>{{ run.completedAt ?? '—' }}</td>
              <td>{{ run.error ?? '—' }}</td>
            </tr>
          }
        </tbody>
      </table>

      <div class="d-flex justify-content-between align-items-center">
        <small class="text-muted">{{ total() }} total runs</small>
        <div class="btn-group btn-group-sm">
          <button
            class="btn btn-outline-secondary"
            [disabled]="page() <= 1"
            (click)="prevPage()"
            aria-label="Previous page">
            Prev
          </button>
          <button
            class="btn btn-outline-secondary"
            [disabled]="runs().length < 10"
            (click)="nextPage()"
            aria-label="Next page">
            Next
          </button>
        </div>
      </div>
    } @else {
      <p class="text-muted small">No runs yet.</p>
    }
  }
</div>
